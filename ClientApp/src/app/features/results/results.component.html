<div class="results-container">
  <div class="container py-4">
    <!-- Header Section -->
    <div class="results-header mb-4">
      <div class="row align-items-center">
        <div class="col-md-8">
          <button class="btn btn-link text-decoration-none mb-2" (click)="backToSearch()">
            <i class="bi bi-arrow-left"></i> Back to Search
          </button>
          <h2 class="mb-2">
            <i class="bi bi-bus-front"></i> Available Buses
          </h2>
          <p class="text-muted mb-0" *ngIf="searchParams">
            <i class="bi bi-geo-alt"></i> {{ searchParams.from }} 
            <i class="bi bi-arrow-right mx-2"></i> 
            {{ searchParams.to }} 
            <span class="mx-2">|</span>
            <i class="bi bi-calendar3"></i> {{ searchParams.journeyDate }}
          </p>
        </div>
        <div class="col-md-4 text-md-end mt-3 mt-md-0">
          <span class="badge bg-primary fs-6">
            {{ buses.length }} {{ buses.length === 1 ? 'Bus' : 'Buses' }} Found
          </span>
        </div>
      </div>
    </div>

    <!-- No Results Message -->
    <div *ngIf="buses.length === 0" class="alert alert-info text-center" role="alert">
      <i class="bi bi-info-circle fs-3 d-block mb-2"></i>
      <h4>No buses found</h4>
      <p class="mb-3">We couldn't find any buses matching your search criteria.</p>
      <button class="btn btn-primary" (click)="backToSearch()">
        <i class="bi bi-search"></i> Search Again
      </button>
    </div>

    <!-- Bus Results Cards -->
    <div class="row g-3" *ngIf="buses.length > 0">
      <div class="col-12" *ngFor="let bus of buses; let i = index">
        <div class="bus-card card shadow-sm">
          <div class="card-body p-4">
            <div class="row align-items-center">
              
              <!-- Bus Info Section -->
              <div class="col-lg-4 mb-3 mb-lg-0">
                <div class="bus-info">
                  <h5 class="bus-name mb-1">
                    {{ bus.operatorName || 'Bus Operator' }}
                  </h5>
                  <p class="text-muted mb-2">
                    <i class="bi bi-bus-front-fill"></i> 
                    {{ bus.busNumber }}
                    <span class="badge bg-secondary ms-2" *ngIf="bus.busType">
                      {{ bus.busType }}
                    </span>
                  </p>
                  <div class="route-info">
                    <small class="text-muted">
                      <i class="bi bi-sign-turn-right"></i> 
                      {{ bus.origin }} â†’ {{ bus.destination }}
                    </small>
                  </div>
                </div>
              </div>

              <!-- Timing Section -->
              <div class="col-lg-4 mb-3 mb-lg-0">
                <div class="timing-section text-center">
                  <div class="row">
                    <div class="col-5">
                      <div class="time-block">
                        <div class="time-value">{{ formatDateTime(bus.departureTime).split(',')[1] }}</div>
                        <small class="text-muted">Departure</small>
                      </div>
                    </div>
                    <div class="col-2 d-flex align-items-center justify-content-center">
                      <div class="duration-badge">
                        <i class="bi bi-clock"></i>
                        <small class="d-block">{{ calculateDuration(bus.departureTime, bus.arrivalTime) }}</small>
                      </div>
                    </div>
                    <div class="col-5">
                      <div class="time-block">
                        <div class="time-value">{{ formatDateTime(bus.arrivalTime).split(',')[1] }}</div>
                        <small class="text-muted">Arrival</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Pricing & Action Section -->
              <div class="col-lg-4">
                <div class="action-section text-lg-end">
                  <!-- Seats Availability -->
                  <div class="seats-info mb-3">
                    <span 
                      class="availability-badge"
                      [ngClass]="'availability-' + getAvailabilityClass(bus.availableSeats, bus.totalSeats)"
                    >
                      <i class="bi bi-person-fill"></i>
                      {{ bus.availableSeats }} / {{ bus.totalSeats }} seats
                    </span>
                    <div class="availability-text mt-1">
                      <small [ngClass]="{
                        'text-success': bus.availableSeats > 10,
                        'text-warning': bus.availableSeats <= 10 && bus.availableSeats > 0,
                        'text-danger': bus.availableSeats === 0
                      }">
                        <i class="bi bi-circle-fill"></i>
                        {{ getAvailabilityText(bus.availableSeats) }}
                      </small>
                    </div>
                  </div>

                  <!-- Price -->
                  <div class="price-section mb-3">
                    <div class="price-label">Starting from</div>
                    <div class="price-value">
                      ${{ bus.price }}
                      <small class="text-muted">/seat</small>
                    </div>
                  </div>

                  <!-- View Seats Button -->
                  <button 
                    class="btn btn-primary btn-lg w-100"
                    (click)="viewSeats(bus)"
                    [disabled]="bus.availableSeats === 0"
                  >
                    <i class="bi bi-grid-3x3-gap"></i>
                    {{ bus.availableSeats === 0 ? 'Sold Out' : 'View Seats' }}
                  </button>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Info Section -->
    <div class="info-card card mt-4" *ngIf="buses.length > 0">
      <div class="card-body">
        <h6 class="card-title">
          <i class="bi bi-info-circle"></i> Booking Information
        </h6>
        <ul class="mb-0 small text-muted">
          <li>Prices shown are per seat and may vary based on seat selection</li>
          <li>Click "View Seats" to see the seat layout and select your preferred seats</li>
          <li>Seats filling fast! Book early to get the best seats</li>
          <li>All timings are in local time zone</li>
        </ul>
      </div>
    </div>

  </div>
</div>
